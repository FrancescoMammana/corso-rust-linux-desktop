<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sviluppo con Glade Designer | Corso Rust Linux Desktop</title>
    <style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    background: #1a1a1a;
    color: #e0e0e0;
    line-height: 1.6;
}

header {
    background: #2a2a2a;
    padding: 1rem 2rem;
    border-bottom: 3px solid #DE8E43;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 1000;
}

.header-content {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.rust-logo {
    font-size: 2rem;
    color: #DE8E43;
}

h1 {
    font-size: 1.5rem;
    color: #DE8E43;
}

.container {
    display: flex;
    margin-top: 70px;
    min-height: calc(100vh - 70px);
}

.sidebar {
    width: 280px;
    background: #252525;
    padding: 2rem 0;
    position: fixed;
    left: 0;
    height: calc(100vh - 70px);
    overflow-y: auto;
    border-right: 1px solid #3a3a3a;
}

.sidebar h3 {
    color: #DE8E43;
    padding: 0.5rem 1.5rem;
    font-size: 0.9rem;
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-top: 1rem;
}

.sidebar ul {
    list-style: none;
}

.sidebar li a {
    display: block;
    padding: 0.7rem 1.5rem 0.7rem 2.5rem;
    color: #b0b0b0;
    text-decoration: none;
    transition: all 0.3s;
    font-size: 0.95rem;
}

.sidebar li a:hover {
    background: #2f2f2f;
    color: #DE8E43;
    border-left: 3px solid #DE8E43;
}

.sidebar li a.active {
    background: #2f2f2f;
    color: #DE8E43;
    border-left: 3px solid #DE8E43;
    font-weight: 600;
}

.content {
    flex: 1;
    margin-left: 280px;
    padding: 2rem 3rem;
    max-width: 1200px;
}

.breadcrumb {
    color: #888;
    font-size: 0.9rem;
    margin-bottom: 2rem;
}

.breadcrumb a {
    color: #4A90E2;
    text-decoration: none;
}

.breadcrumb a:hover {
    text-decoration: underline;
}

.lesson-title {
    font-size: 2.5rem;
    color: #DE8E43;
    margin-bottom: 1rem;
}

.box {
    margin: 2rem 0;
    padding: 1.5rem;
    border-radius: 8px;
    border-left: 4px solid;
}

.box-theory {
    background: #2a2a3e;
    border-left-color: #4A90E2;
}

.box-steps {
    background: #2a2a2a;
    border-left-color: #DE8E43;
}

.box-code {
    background: #1e1e1e;
    border-left-color: #DE8E43;
    position: relative;
}

.box-exercises {
    background: #2d4a2e;
    border-left-color: #5cb85c;
}

.box-troubleshooting {
    background: #4a2d2e;
    border-left-color: #d9534f;
}

.box h3 {
    color: #DE8E43;
    margin-bottom: 1rem;
    font-size: 1.3rem;
}

.box-theory h3 { color: #4A90E2; }
.box-exercises h3 { color: #5cb85c; }
.box-troubleshooting h3 { color: #d9534f; }

code {
    font-family: 'Fira Code', 'Courier New', monospace;
    background: #2a2a2a;
    padding: 0.2rem 0.4rem;
    border-radius: 3px;
    font-size: 0.9rem;
    color: #DE8E43;
}

pre {
    background: #1e1e1e;
    padding: 1.5rem;
    border-radius: 5px;
    overflow-x: auto;
    margin: 1rem 0;
}

pre code {
    background: none;
    padding: 0;
    color: #e0e0e0;
    display: block;
}

.copy-button {
    position: absolute;
    top: 1rem;
    right: 1rem;
    background: #DE8E43;
    color: #1a1a1a;
    border: none;
    padding: 0.4rem 0.8rem;
    border-radius: 4px;
    cursor: pointer;
    font-size: 0.85rem;
    font-weight: 600;
}

.copy-button:hover {
    background: #f09d5a;
}

ol, ul {
    margin-left: 1.5rem;
    margin-top: 0.5rem;
}

li {
    margin: 0.5rem 0;
}

.lesson-nav {
    display: flex;
    justify-content: space-between;
    margin-top: 3rem;
    padding-top: 2rem;
    border-top: 1px solid #3a3a3a;
}

.lesson-nav a {
    background: #DE8E43;
    color: #1a1a1a;
    padding: 0.8rem 1.5rem;
    border-radius: 5px;
    text-decoration: none;
    font-weight: 600;
    transition: all 0.3s;
}

.lesson-nav a:hover {
    background: #f09d5a;
    transform: translateY(-2px);
}

.lesson-nav a.disabled {
    background: #3a3a3a;
    color: #666;
    cursor: not-allowed;
}

footer {
    background: #252525;
    padding: 2rem;
    text-align: center;
    color: #888;
    border-top: 1px solid #3a3a3a;
    margin-top: 3rem;
}

@media (max-width: 768px) {
    .sidebar {
        transform: translateX(-100%);
        transition: transform 0.3s;
    }

    .sidebar.open {
        transform: translateX(0);
    }

    .content {
        margin-left: 0;
        padding: 1rem;
    }
}
</style>
</head>
<body>
    
    <header>
        <div class="header-content">
            <div class="rust-logo">ü¶Ä</div>
            <h1>Corso Completo: Sviluppo Applicazioni Desktop Linux in Rust</h1>
        </div>
    </header>
    

    <div class="container">
        
    <aside class="sidebar">
        <h3>üìö Corso Rust Linux</h3>
        <ul>
            <li><a href="index.html">üè† Home</a></li>
        </ul>

        <h3>1. Ambiente di Sviluppo</h3>
        <ul>
            <li><a href="lesson-1-1.html">1.1 Installazione Rust</a></li>
            <li><a href="lesson-1-2.html">1.2 Config VS Code</a></li>
            <li><a href="lesson-1-3.html">1.3 Strumenti Extra</a></li>
        </ul>

        <h3>2. Rust Base</h3>
        <ul>
            <li><a href="lesson-2-1.html">2.1 Sintassi Fondamentale</a></li>
            <li><a href="lesson-2-2.html">2.2 Strutture Controllo</a></li>
            <li><a href="lesson-2-3.html">2.3 Struttura Progetto</a></li>
            <li><a href="lesson-2-4.html">2.4 Crate & Dipendenze</a></li>
        </ul>

        <h3>3. Sviluppo GUI</h3>
        <ul>
            <li><a href="lesson-3-1.html">3.1 Intro GTK-rs</a></li>
            <li><a href="lesson-3-2.html">3.2 Glade Designer</a></li>
            <li><a href="lesson-3-3.html">3.3 Sviluppo Manuale</a></li>
            <li><a href="lesson-3-4.html">3.4 Widget & Eventi</a></li>
            <li><a href="lesson-3-5.html">3.5 Menu & Dialog</a></li>
        </ul>

        <h3>4. Progetti Pratici</h3>
        <ul>
            <li><a href="lesson-4-1.html">4.1 Editor di Testo</a></li>
            <li><a href="lesson-4-2.html">4.2 Gestore Note DB</a></li>
            <li><a href="lesson-4-3.html">4.3 Client HTTP</a></li>
        </ul>

        <h3>5. GitHub & Best Practices</h3>
        <ul>
            <li><a href="lesson-5-1.html">5.1 Repository GitHub</a></li>
            <li><a href="lesson-5-2.html">5.2 Documentazione</a></li>
            <li><a href="lesson-5-3.html">5.3 Testing & Debug</a></li>
        </ul>

        <h3>üìñ Altro</h3>
        <ul>
            <li><a href="about.html">‚ÑπÔ∏è Info Corso</a></li>
            <li><a href="projects.html">üéØ Progetti</a></li>
            <li><a href="resources.html">üîó Risorse</a></li>
            <li><a href="faq.html">‚ùì FAQ</a></li>
        </ul>
    </aside>
    

        <main class="content">
            <nav class="breadcrumb">
                <a href="index.html">Home</a> > Sezione 3: Sviluppo GUI > Sviluppo con Glade Designer
            </nav>

            <h2 class="lesson-title">Sviluppo con Glade Designer</h2>

            <div class="box box-theory">
                <h3>üìò Introduzione Teorica</h3>
                
<p><strong>Glade</strong> √® un designer visuale per creare interfacce GTK tramite drag-and-drop. Genera file XML (<code>.glade</code>) che descrivono la struttura dell'interfaccia, permettendoti di separare design e logica.</p>
<ul>
    <li><strong>Sviluppo Visuale</strong>: Disegna l'interfaccia senza scrivere codice</li>
    <li><strong>File XML</strong>: Formato leggibile e versionabile</li>
    <li><strong>Builder Pattern</strong>: GTK carica l'XML e crea i widget automaticamente</li>
    <li><strong>Signal Handlers</strong>: Collega eventi dell'UI al codice Rust</li>
    <li><strong>Prototipazione Rapida</strong>: Ideale per testare rapidamente layout complessi</li>
</ul>
<p>Glade √® perfetto per interfacce complesse mentre il codice manuale √® migliore per UI dinamiche.</p>

            </div>

            <div class="box box-steps">
                <h3>üîß Procedura Passo-Passo</h3>
                
<ol>
    <li><strong>Installa Glade su Debian</strong>
        <pre><code>sudo apt install glade -y

# Verifica installazione
glade --version</code></pre>
    </li>

    <li><strong>Crea interfaccia in Glade</strong>
        <p>Apri Glade e crea una nuova interfaccia:</p>
        <ul>
            <li>Aggiungi un <code>GtkWindow</code> (ID: "main_window")</li>
            <li>Aggiungi un <code>GtkBox</code> verticale</li>
            <li>Aggiungi un <code>GtkLabel</code> (ID: "label_result")</li>
            <li>Aggiungi un <code>GtkButton</code> (ID: "button_click", label: "Cliccami!")</li>
            <li>Nel button, aggiungi signal "clicked" handler "on_button_clicked"</li>
        </ul>
        <p>Salva come <code>interface.glade</code>.</p>
    </li>

    <li><strong>Carica il file .glade in Rust</strong>
        <pre><code>use gtk::prelude::*;
use gtk::{Application, Builder};

fn main() {
    let app = Application::builder()
        .application_id("com.example.GladeApp")
        .build();

    app.connect_activate(build_ui);
    app.run();
}

fn build_ui(app: &Application) {
    // Carica il file glade
    let builder = Builder::from_string(include_str!("interface.glade"));

    // Ottieni riferimenti ai widget
    let window: gtk::ApplicationWindow = builder
        .object("main_window")
        .expect("Impossibile trovare main_window");

    window.set_application(Some(app));

    let button: gtk::Button = builder
        .object("button_click")
        .expect("Impossibile trovare button_click");

    let label: gtk::Label = builder
        .object("label_result")
        .expect("Impossibile trovare label_result");

    // Collega signal
    button.connect_clicked(move |_| {
        label.set_text("Bottone cliccato!");
    });

    window.show_all();
}</code></pre>
    </li>

    <li><strong>Compila e testa</strong>
        <pre><code># Assicurati che interface.glade sia in src/
cargo run</code></pre>
    </li>
</ol>

            </div>

            <div class="box box-code">
                <h3>üíª Codice Sorgente Commentato</h3>
                <button class="copy-button">Copia</button>
                
<pre><code>// ========================================
// ESEMPIO COMPLETO: Calcolatrice con Glade
// ========================================

use gtk::prelude::*;
use gtk::{Application, Builder, Button, Entry, Label};
use std::cell::RefCell;
use std::rc::Rc;

fn main() {
    let app = Application::builder()
        .application_id("com.example.Calculator")
        .build();

    app.connect_activate(build_ui);
    app.run();
}

fn build_ui(app: &Application) {
    // ========================================
    // File interface.glade (crea questo in Glade):
    // ========================================
    /*
    <?xml version="1.0" encoding="UTF-8"?>
    <interface>
      <object class="GtkApplicationWindow" id="window">
        <property name="title">Calcolatrice</property>
        <property name="default_width">300</property>
        <property name="default_height">400</property>
        <property name="border_width">10</property>
        <child>
          <object class="GtkBox" id="main_box">
            <property name="orientation">vertical</property>
            <property name="spacing">10</property>
            <child>
              <object class="GtkEntry" id="display">
                <property name="editable">false</property>
                <property name="text">0</property>
                <property name="xalign">1</property>
              </object>
            </child>
            <child>
              <object class="GtkGrid" id="buttons_grid">
                <property name="row_spacing">5</property>
                <property name="column_spacing">5</property>
              </object>
            </child>
          </object>
        </child>
      </object>
    </interface>
    */

    // Carica il file glade
    let glade_src = include_str!("interface.glade");
    let builder = Builder::from_string(glade_src);

    // Ottieni widget dalla UI
    let window: gtk::ApplicationWindow = builder
        .object("window")
        .expect("Impossibile trovare window");

    window.set_application(Some(app));

    let display: Entry = builder
        .object("display")
        .expect("Impossibile trovare display");

    let buttons_grid: gtk::Grid = builder
        .object("buttons_grid")
        .expect("Impossibile trovare buttons_grid");

    // ========================================
    // STATO DELLA CALCOLATRICE
    // ========================================
    #[derive(Clone)]
    struct CalcState {
        current: String,
        operator: Option<char>,
        previous: Option<f64>,
    }

    let state = Rc::new(RefCell::new(CalcState {
        current: String::from("0"),
        operator: None,
        previous: None,
    }));

    // ========================================
    // CREA BOTTONI NUMERI
    // ========================================
    for i in 0..10 {
        let button = Button::with_label(&i.to_string());
        let row = 3 - (i - 1) / 3;
        let col = (i - 1) % 3;

        if i == 0 {
            buttons_grid.attach(&button, 1, 4, 1, 1);
        } else {
            buttons_grid.attach(&button, col, row, 1, 1);
        }

        let display_clone = display.clone();
        let state_clone = state.clone();

        button.connect_clicked(move |btn| {
            let digit = btn.label().unwrap().to_string();
            let mut s = state_clone.borrow_mut();

            if s.current == "0" {
                s.current = digit;
            } else {
                s.current.push_str(&digit);
            }

            display_clone.set_text(&s.current);
        });
    }

    // ========================================
    // BOTTONI OPERATORI
    // ========================================
    let operators = vec![
        ("+", 3, 0),
        ("-", 3, 1),
        ("*", 3, 2),
        ("/", 3, 3),
    ];

    for (op, col, row) in operators {
        let button = Button::with_label(op);
        buttons_grid.attach(&button, col, row, 1, 1);

        let state_clone = state.clone();
        let op_char = op.chars().next().unwrap();

        button.connect_clicked(move |_| {
            let mut s = state_clone.borrow_mut();

            if let Ok(num) = s.current.parse::<f64>() {
                s.previous = Some(num);
                s.operator = Some(op_char);
                s.current = String::from("0");
            }
        });
    }

    // ========================================
    // BOTTONE UGUALE
    // ========================================
    let equals_button = Button::with_label("=");
    buttons_grid.attach(&equals_button, 2, 4, 1, 1);

    let display_clone = display.clone();
    let state_clone = state.clone();

    equals_button.connect_clicked(move |_| {
        let mut s = state_clone.borrow_mut();

        if let (Some(prev), Some(op), Ok(curr)) = 
            (s.previous, s.operator, s.current.parse::<f64>()) {

            let result = match op {
                '+' => prev + curr,
                '-' => prev - curr,
                '*' => prev * curr,
                '/' => if curr != 0.0 { prev / curr } else { 0.0 },
                _ => 0.0,
            };

            s.current = result.to_string();
            s.previous = None;
            s.operator = None;

            display_clone.set_text(&s.current);
        }
    });

    // ========================================
    // BOTTONE CLEAR
    // ========================================
    let clear_button = Button::with_label("C");
    buttons_grid.attach(&clear_button, 0, 4, 1, 1);

    clear_button.connect_clicked(move |_| {
        let mut s = state.borrow_mut();
        s.current = String::from("0");
        s.previous = None;
        s.operator = None;
        display.set_text("0");
    });

    window.show_all();
}

// ========================================
// ESEMPIO 2: Form con Glade
// ========================================
/*
File form.glade:

<?xml version="1.0" encoding="UTF-8"?>
<interface>
  <object class="GtkWindow" id="form_window">
    <property name="title">Form Utente</property>
    <child>
      <object class="GtkBox">
        <property name="orientation">vertical</property>
        <property name="spacing">10</property>
        <property name="border_width">10</property>
        <child>
          <object class="GtkLabel">
            <property name="label">Nome:</property>
            <property name="xalign">0</property>
          </object>
        </child>
        <child>
          <object class="GtkEntry" id="entry_nome"/>
        </child>
        <child>
          <object class="GtkLabel">
            <property name="label">Email:</property>
            <property name="xalign">0</property>
          </object>
        </child>
        <child>
          <object class="GtkEntry" id="entry_email"/>
        </child>
        <child>
          <object class="GtkButton" id="button_submit">
            <property name="label">Invia</property>
            <signal name="clicked" handler="on_submit_clicked"/>
          </object>
        </child>
      </object>
    </child>
  </object>
</interface>

Codice Rust:

fn build_form(app: &Application) {
    let builder = Builder::from_string(include_str!("form.glade"));

    let window: gtk::Window = builder.object("form_window").unwrap();
    let entry_nome: Entry = builder.object("entry_nome").unwrap();
    let entry_email: Entry = builder.object("entry_email").unwrap();
    let button: Button = builder.object("button_submit").unwrap();

    button.connect_clicked(move |_| {
        let nome = entry_nome.text();
        let email = entry_email.text();

        println!("Nome: {}, Email: {}", nome, email);
    });

    window.show_all();
}
*/
</code></pre>

            </div>

            <div class="box box-exercises">
                <h3>‚úèÔ∏è Esercizi Pratici</h3>
                
<ol>
    <li><strong>Form Semplice con Glade</strong>
        <p>Crea in Glade un form con:</p>
        <ul>
            <li>2 Entry (nome e cognome)</li>
            <li>1 Button "Salva"</li>
            <li>1 Label per mostrare il risultato</li>
        </ul>
        <p>Quando clicchi Salva, mostra "Nome: [nome] Cognome: [cognome]" nella label.</p>
    </li>

    <li><strong>Calcolatrice Completa</strong>
        <p>Estendi l'esempio della calcolatrice aggiungendo:</p>
        <ul>
            <li>Bottone per il punto decimale (.)</li>
            <li>Bottone per cambiare segno (+/-)</li>
            <li>Bottone per percentuale (%)</li>
        </ul>
    </li>

    <li><strong>To-Do List con Glade</strong>
        <p>Crea un'interfaccia con:</p>
        <ul>
            <li>Entry per inserire task</li>
            <li>Button "Aggiungi"</li>
            <li>TextView o ListBox per mostrare i task</li>
            <li>Button "Rimuovi selezionato"</li>
        </ul>
    </li>

    <li><strong>Menu con Glade</strong>
        <p>Crea in Glade una finestra con MenuBar contenente:</p>
        <ul>
            <li>Menu File (Nuovo, Apri, Salva, Esci)</li>
            <li>Menu Edit (Taglia, Copia, Incolla)</li>
            <li>Menu Help (Info)</li>
        </ul>
        <p>Collega gli handler in Rust.</p>
    </li>

    <li><strong>Dialog con Glade</strong>
        <p>Crea un AboutDialog in Glade con informazioni sull'app. Mostralo quando l'utente clicca un bottone.</p>
    </li>

    <li><strong>Challenge: Convertitore Unit√†</strong>
        <p>Crea in Glade un'interfaccia per convertire unit√†:</p>
        <ul>
            <li>2 ComboBox per selezionare unit√† origine/destinazione</li>
            <li>Entry per valore da convertire</li>
            <li>Label per risultato</li>
            <li>Button "Converti"</li>
        </ul>
        <p>Supporta almeno 3 categorie (lunghezza, peso, temperatura).</p>
    </li>
</ol>

            </div>

            <div class="box box-troubleshooting">
                <h3>‚ö†Ô∏è Troubleshooting</h3>
                
<h4>‚ùå Errore: "Impossibile trovare [widget_id]"</h4>
<p><strong>Causa:</strong> L'ID del widget in Glade non corrisponde al codice.</p>
<p><strong>Soluzione:</strong></p>
<ul>
    <li>Apri il file .glade in un editor di testo</li>
    <li>Cerca <code>&lt;object class="GtkButton" id="..."&gt;</code></li>
    <li>Verifica che l'ID corrisponda esattamente</li>
    <li>Gli ID sono case-sensitive!</li>
</ul>

<h4>‚ùå Errore: "Widget signal not connected"</h4>
<p><strong>Causa:</strong> Signal handler definito in Glade ma non implementato in Rust.</p>
<p><strong>Soluzione:</strong> In GTK-rs non usi gli handler name da Glade. Invece ottieni il widget e usi <code>connect_clicked</code> nel codice:</p>
<pre><code>// NON serve implementare "on_button_clicked"
// Invece:
let button: Button = builder.object("my_button").unwrap();
button.connect_clicked(|_| {
    println!("Clicked!");
});</code></pre>

<h4>‚ùå File .glade non trovato</h4>
<p><strong>Causa:</strong> Il percorso del file non √® corretto.</p>
<p><strong>Soluzione:</strong></p>
<pre><code>// Metti interface.glade in src/
// Poi usa include_str! (compile-time include)
let builder = Builder::from_string(include_str!("interface.glade"));

// Oppure carica a runtime:
let builder = Builder::from_file("src/interface.glade");</code></pre>

<h4>‚ö†Ô∏è Widget non visibili</h4>
<p><strong>Causa:</strong> Propriet√† "visible" non settata in Glade.</p>
<p><strong>Soluzione:</strong> In Glade, seleziona ogni widget e nella sezione Properties verifica che "Visible" sia checkato.</p>

<h4>üí° Tip: Validare file .glade</h4>
<p>Apri il file .glade con Glade per verificare che sia valido. Glade ti segnaler√† errori di sintassi.</p>

<h4>üí° Tip: Debug Builder</h4>
<pre><code>// Stampa tutti gli oggetti caricati dal builder
for obj in builder.objects() {
    println!("Object: {:?}", obj);
}</code></pre>

<h4>üí° Tip: Glade vs Codice Manuale</h4>
<p><strong>Usa Glade quando:</strong></p>
<ul>
    <li>L'interfaccia √® complessa e statica</li>
    <li>Vuoi prototipare rapidamente</li>
    <li>Lavori in team con designer</li>
</ul>
<p><strong>Usa codice manuale quando:</strong></p>
<ul>
    <li>L'UI √® dinamica (widget generati runtime)</li>
    <li>Serve pieno controllo programmatico</li>
    <li>L'interfaccia √® semplice</li>
</ul>

<h4>üîç Risorse Glade</h4>
<ul>
    <li><a href="https://glade.gnome.org" style="color: #DE8E43;">Glade Official Site</a></li>
    <li><a href="https://developer.gnome.org/glade/stable/" style="color: #DE8E43;">Glade Manual</a></li>
    <li>Esempi in <code>/usr/share/doc/glade/</code> su Linux</li>
</ul>

            </div>

            <nav class="lesson-nav">
                <a href="lesson-3-1.html">‚Üê Lezione Precedente</a>
                <a href="lesson-3-3.html">Lezione Successiva ‚Üí</a>
            </nav>
        </main>
    </div>

    
    <footer>
        <p>&copy; 2025 Corso Rust Linux Desktop | Creato con ‚ù§Ô∏è per la community Rust</p>
        <p><a href="https://www.rust-lang.org" target="_blank" style="color: #DE8E43;">Rust Programming Language</a> | 
           <a href="https://gtk-rs.org" target="_blank" style="color: #DE8E43;">GTK-rs</a></p>
    </footer>
    

    <script>
document.addEventListener('DOMContentLoaded', function() {
    const currentPage = window.location.pathname.split('/').pop();
    const links = document.querySelectorAll('.sidebar a');
    links.forEach(link => {
        if (link.getAttribute('href') === currentPage) {
            link.classList.add('active');
        }
    });

    const codeBlocks = document.querySelectorAll('.box-code');
    codeBlocks.forEach(block => {
        const button = block.querySelector('.copy-button');
        if (button) {
            button.addEventListener('click', () => {
                const code = block.querySelector('code').textContent;
                navigator.clipboard.writeText(code);
                button.textContent = 'Copiato!';
                setTimeout(() => {
                    button.textContent = 'Copia';
                }, 2000);
            });
        }
    });
});
</script>
</body>
</html>